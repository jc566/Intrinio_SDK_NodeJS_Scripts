var username = "b53ca7da9d4a36ec6c2880700d200928"
var password = "4f7569d13ad10073691481e2a2667e3f"
var intrinio = require("intrinio-client")(username,password)

//Required to open up access Server and HTML interaction
var express = require('express')
var app = express()


//populate a variable with the ticker the user may want to look up
var stockCo = 'AAPL' 
/*
stockCo needs to obtain its value from front end and have a value
passed into this script.
OR you know, its JS so plop it in the HTML and send values to backend 
to store it if needed.
*/

//Structure to carry information about the queried company 
//This is for display purposes.
var compInfo = {
Ticker: '',
Name: '',
SE: '',
CEO: '',
URL: '',
Desc: ''
};
//run search for information about a company of X value
intrinio
.ticker(stockCo)
//.ticker('GOOG') <---- This is the original method
.on('complete',function(data,response) {
	if(response.statusCode==404){
		console.log("Not Found")
	}else if(response.statusCode==200){
		console.log(data.ticker)
		console.log(data.legal_name)
		console.log(data.stock_exchange)
		
		////Populate the compInfo with appropriate data

		compInfo.Ticker = data.ticker
		compInfo.Name = data.legal_name
		compInfo.SE = data.stock_exchange	

		
	}
});

//provide info : CEO, Company Website, Short Description
intrinio.companies(stockCo)
.on('complete', function(data, response) {

	if(response.statusCode==404){
		console.log("Not Found")
	}else if(response.statusCode==200){
		console.log(data.ceo)
		console.log(data.company_url)
		console.log(data.short_description)
		
		//Populate the compInfo with appropriate data
		compInfo.CEO = data.ceo
		compInfo.URL = data.company_url
		compInfo.Desc = data.short_description
	}
	
});


//To send the information forward to HTML
app.get('/', function(data,response){
		response.json({compInfo);		
		});
//Server is open and listening
app.listen(8080, function(){
	console.log('example app listening')
});




/*
So 'console.log(data)' ends up displaying a whole chunk of info.

We only need the following to be displayed :
data.legal_name
data.ticker
data.stock_exchange

in respective order the above displays the following :
Stock Company's Official Full Name
Stock Ticker Symbol
Stock Exchange Market ex: Nasdaq, Dow Jones etc

*/


