var username = "b53ca7da9d4a36ec6c2880700d200928" //Your Username
var password = "4f7569d13ad10073691481e2a2667e3f" //Your Password
var intrinio = require("../index.js")(username, password)

var stockCo = 'AAPL'

/*
Theres a issue with the updateFrequency waiting on the first
iteration. So we going to make 2 calls. 
First one will be instant and have 1 request.
Second will have 30 second/1 minute updates and have X requests.
*/

//First Update Info
intrinio
.watch
.prices(stockCo, 1000, 1, function(watcher){
	watcher
	.on('update', function(data, response){
		console.log(data.data[0])
		response.write(data)
	})
	.on('error', function(data, reponse){
		console.log(data.data[0])
	})
})
var updateFrequency = 30000		//Duration between each request
var numberOfRequests = 5		//Send this number of requests 

//Traditional Callback Style 
intrinio
.watch
.prices(stockCo, updateFrequency, numberOfRequests, function(watcher){
	watcher
	.on('update', function(data, response){
		console.log(data.data[0])					//data is the response from the Intrinio API	
		// console.log(response)			//response is the http response
	})
	.on('error', function(data, response){
		console.log(data.data[0])					//data is the response from the Intrinio API	
		// console.log(response)			//response is the http response
	})	
})
